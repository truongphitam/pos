(()=>{var e={991:e=>{e.exports=function(){return this.lodash}()},514:e=>{e.exports=function(){return this.wp.apiFetch}()},15:e=>{e.exports=function(){return this.wp.data}()},470:e=>{e.exports=function(){return this.wp.url}()}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{"use strict";r.r(n);var e=r(514),t=r.n(e),a=r(15),s=r(991),o=r(470);const i="pll/metabox",u="core/edit-site",c={languages:[],selectedLanguage:{},translatedPosts:{},fromPost:null,currentTemplatePart:{}};function l(e){const t=new URL(document.location).searchParams,r=t.get("postType"),n=t.get("postId"),i=(0,a.select)("core/edit-post")?.isEditingTemplate();("wp_template_part"===r&&!(0,s.isNil)(n)||i)&&function(e){e.path=(0,o.addQueryArgs)(e.path,{include_untranslated:!0})}(e)}const p={setLanguages:e=>({type:"SET_LANGUAGES",languages:e}),setCurrentUser:(e,t=!1)=>({type:"SET_CURRENT_USER",currentUser:e,save:t}),setFromPost:e=>({type:"SET_FROM_POST",fromPost:e}),fetchFromAPI:e=>({type:"FETCH_FROM_API",options:e}),setCurrentTemplatePart:e=>({type:"SET_CURRENT_TEMPLATE_PART",currentTemplatePart:e})},d=(0,a.createReduxStore)(i,{reducer(e=c,r){switch(r.type){case"SET_LANGUAGES":return{...e,languages:r.languages};case"SET_CURRENT_USER":return r.save&&(n=r.currentUser,t()({path:"/wp/v2/users/me",data:n,method:"POST"})),{...e,currentUser:r.currentUser};case"SET_FROM_POST":return{...e,fromPost:r.fromPost};case"SET_CURRENT_TEMPLATE_PART":return{...e,currentTemplatePart:r.currentTemplatePart};default:return e}var n},selectors:{getLanguages:e=>e.languages,getCurrentUser:e=>e.currentUser,getFromPost:e=>e.fromPost,getCurrentTemplatePart:e=>e.currentTemplatePart},actions:p,controls:{FETCH_FROM_API:e=>t()({...e.options})},resolvers:{*getLanguages(){const e=yield p.fetchFromAPI({path:"/pll/v1/languages",filterLang:!1});return p.setLanguages(function(e,t){const r=new Map;return e.reduce((function(e,r){return e.set(r[t],r),e}),r),r}(e,"slug"))},*getCurrentUser(){const e=yield p.fetchFromAPI({path:"/wp/v2/users/me",filterLang:!0});return p.setCurrentUser(e)},*getCurrentTemplatePart(){const e=g();return p.setCurrentTemplatePart(e)}}});(0,a.register)(d);new Promise((function(e){let t=(0,a.subscribe)((function(){(0,a.select)(i).getLanguages().size>0&&(t(),e())}))}));function g(){const e=(0,a.select)(u)?.getEditedPostId(),t=(0,a.select)(u)?.getEditedPostType();return(0,a.select)("core").getEntityRecord("postType",t,e)}function f(){const e=(0,a.select)("core/editor").getEditedPostAttribute("lang");if(!(0,s.isUndefined)(e)&&e)return e;const t=new URL(document.location).searchParams,r=t.get("postType"),n=t.get("postId");if("wp_template_part"===r&&(0,s.isNil)(n)){const e=(0,a.select)(i).getLanguages();if(e instanceof Map&&e.size>0)return pll_block_editor_plugin_settings.lang=Array.from(e.values()).find((e=>e.is_default_lang)),pll_block_editor_plugin_settings.lang.slug}const o=g()?.lang;return!(0,s.isUndefined)(o)&&o?o:pll_block_editor_plugin_settings.lang.slug}t().use(((e,t)=>{if((0,s.isUndefined)(e.url)){const t=f();!function(e){return!(0,s.isNil)(e.data)}(e)?(function(e,t){const r=(0,o.hasQueryArg)(e.path,"lang");((0,s.isUndefined)(e.filterLang)||e.filterLang)&&!r&&(e.path=(0,o.addQueryArgs)(e.path,{lang:t}))}(e,f()),l(e),function(e){e.path=(0,o.addQueryArgs)(e.path,{is_block_editor:!0})}(e)):(e.data.is_block_editor=!0,function(e){const t=(0,s.map)((0,a.select)("core").getEntitiesByKind("postType"),(0,s.property)("baseURL")),r=(0,a.select)("core/editor").getCurrentPostId(),n=e.data.id;return-1!==t.findIndex((function(t){return new RegExp(`${(0,s.escapeRegExp)(t)}`).test(e.path)}))&&r===n}(e)||function(e){return"POST"==e.method&&e.path.match(/^\/wp\/v2\/template-parts(?:\/|\?|$)/)&&!(0,s.isNil)(e.data.from_post)&&!(0,s.isNil)(e.data.lang)}(e)||(e.data.lang=t),function(e,t){const r=function(e){const t=(0,a.select)("core").getEntitiesByKind("postType");return(0,s.find)(t,{name:e})?.baseURL}("wp_template_part");if((0,s.isUndefined)(r))return;const n=new RegExp((0,s.escapeRegExp)(r));if("POST"==e.method&&n.test(e.path)){if(!(0,a.select)(i).getLanguages().get(t).is_default_lang){const r="___"+t;e.data.slug+=r}}}(e,t))}return t(e)})),"undefined"!=typeof jQuery&&jQuery((function(e){e.ajaxPrefilter((function(e,t,r){if(-1!=e.url.indexOf(ajaxurl)||-1!=ajaxurl.indexOf(e.url)){const n=f(),a={lang:n};function s(){const t="lang="+n;if(void 0===e.data||""===e.data.trim())e.data=t;else try{e.data=JSON.stringify(Object.assign(JSON.parse(e.data),a))}catch(r){e.data=e.data+"&"+t}}e.processData||void 0===e.data||"string"==typeof e.data?s():e.data=Object.assign(e.data||{},a)}}))}))})(),this["polylang-pro"]=n})();